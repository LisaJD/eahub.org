{% extends 'base.html' %}

{% block content %}
<head>
  <link rel="stylesheet" type="text/css"  href="/static/styles/profile.css">
</head>

<div class="container-narrow profile">
  <div class="profile-head">
    <img src="{% firstof group.pic '/static/images/group_avatar.png' %}" class="profile-pic"/>
    <h1 class="profile-name">{{ group.name|title }}</h1>

    {% if group.official_email %}
    <a href="mailto:{{ group.official_email }}">
      <div class="profile-contact">Connect</div>
    </a>
    {% elif group.facebook_group %}
    <a href="group.facebook_group }}">
      <div class="profile-contact">Connect</div>
    </a>
    {% elif group.facebook_page %}
    <a href="group.facebook_page }}">
      <div class="profile-contact">Connect</div>
    </a>
    {% elif group.lean_email %}
    <a href="mailto:{{ group.lean_email }}">
      <div class="profile-contact">Connect</div>
    </a>
    {% endif %}

  </div>

  <div class="row">
    {% if group.lat and group.lon %}
    <div class="profile-key-facts col-sm-6">
    {% else %}
    <div class="profile-key-facts col-sm-6 col-sm-offset-3">
    {% endif %}
      <h3>Key facts</h3>
      <ul>
        {% if group.facebook_group %}
          <li><a href="{{ group.facebook_group }}"><i class="fa fa-facebook"></i> Community</a></li>
        {% endif %}
        {% if group.website %}
          <li><b><a href="{{ group.website }}">Website</a></b></li>
        {% endif %}
        {% if group.country %}
          <li><b>Country:</b> {{ group.country }}</li>
        {% endif %}
        {% if group.organisers %}
          <li><b>Organiser:</b> {{ group.organisers }}</li>
        {% endif %}
        {% if group.meetup_details %}
          <li><b>Meetup details:</b> {{ group.meetup_details }}
            {% if group.meetup_url %}
              <a href="{{ group.url }}">Meetup Link</a>
            {% endif %}
          </li>
        {% endif %}
        <li><b>Funds raised</b> 80000 Lorems-$</li>
      </ul>
    </div>

    {% if group.lat and group.lon %}
    <div class="col-sm-6 profile-map">
      <a href="/groups">
      {% include 'eahub/maps/profile_link.html' with lat=group.lat lon=group.lon %}
      </a>
    </div>
    {% endif %}
  </div>

  {% if group.summary %}
  <div class="profile-info">
    <h3>Summary</h3>
    <p>
      {{ group.summary }}
    </p>
  </div>
  {% endif %}

  {% if group.donations  %}
  <div class="profile-info">
    <h3>Donations</h3>
    <table class="table table-striped table-bordered table-donations">
      <thead>
        <tr>
            <th>To</th>
            <th>Amount</th>
            <th>Date</th>
            <th>Details</th>
        </tr>
      </thead>
      <tbody  id="table_donations">
      </tbody>
    </table>
  </div>
  {% endif %}

  <div class="profile-info">
    <h3>Custom</h3>
    <p>
      Here's some further info about our group: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
    </p>
  </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
  var donations = {{ group.donations | safe }}
  donations = donations.donations
  var table_donations = $("#table_donations")
  donations.forEach(function(donation) {
    var tr = $('<tr>')
    tr.append('<td>' + donation.to + '</td>')
    tr.append('<td>' + donation.amount + '</td>')
    tr.append('<td>' + donation.when + '</td>')
    tr.append('<td>' + donation.details + '</td>')
    table_donations.append(tr)
  })
</script>

{% endblock %}
