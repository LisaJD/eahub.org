{% extends 'base.html' %}

{% block content %}

<link rel="stylesheet" type="text/css"  href="/static/styles/profile.css">

<div class="profile">
    <div class="profile-head">
      <img src="{% firstof profile.pic '/static/images/profile_Avatar10.png' %}" class="profile-pic"/>
      <h1 class="profile-name">{{ profile.full_name|title }}</h1>
      <div class="profile-contact">
        {% if user.id == profile.id %}
          <a href="{% url 'edit_profile' %}"><i class="fa fa-pencil"></i> Edit</a>
        {% else %}
          <span>Connect</span>
        {% endif %}
      </div>
    </div>
    <div class="row">
    {% if profile.lat and profile.lon %}
    <div class="profile-key-facts col-sm-6">
    {% else %}
    <div class="profile-key-facts col-sm-6 col-sm-offset-3">
    {% endif %}
      <h3>Key facts</h3>
      <ul>
        <li><b>Cause areas:</b>
          {% if profile.cause_areas %}
          {{ profile.cause_areas }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Direct work hours:</b>
          {% if profile.direct_work_hours %}
          {{ profile.direct_work_hours }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Expertise:</b>
          {% if profile.expertise %}
          {{ profile.expertise }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Speaker:</b>
          {% if profile.speaker %}
          {{ profile.speaker }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Group:</b>
          {% if profile.group %}
          <a href="{% url 'group' profile.group.id %}">{{profile.group.name}}</a>
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Skills:</b>
          {% if profile.skills %}
          {{ profile.skills }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Volunteer:</b>
          {% if profile.volunteer %}
          {{ profile.volunteer }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Job status:</b>
          {% if profile.job_status %}
          {{ profile.job_status }}
          {% else %}
          n/a
          {% endif %}
        </li>
        <li><b>Organisational affiliations:</b>
          {% if profile.org_affiliations %}
          {{ profile.org_affiliations }}
          {% else %}
          n/a
          {% endif %}
        </li>
      </ul>
    </div>

    {% if profile.lat and profile.lon %}
    <div class="col-sm-6 profile-map">
      <a href="/profiles">
      {% include 'eahub/maps/local_link.html' with lat=profile.lat lon=profile.lon %}
      </a>
    </div>
    {% endif %}
    </div>
    <div class="profile-info">
      <h3>Bio</h3>
      <p>
        I always have had a big passion for lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
      </p>
    </div>
    <div class="profile-info">
      <h3>Information</h3>
      <p>
        Some really interesting information about me is that lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
      </p>
    </div>

    {% if profile.donations  %}
    <div class="profile-info">
      <h3>Donations</h3>
      <table class="table table-striped table-bordered table-donations">
        <thead>
          <tr>
              <th>To</th>
              <th>Amount</th>
              <th>Date</th>
              <th>Details</th>
          </tr>
        </thead>
        <tbody  id="table_donations">
        </tbody>
      </table>
    </div>
    {% endif %}

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
  var donations = {{ profile.donations | safe }}
  // var organisers = {{ group.organisers.all | safe }}
  // console.log(organisers);
  donations = donations.donations
  var table_donations = $("#table_donations")
  donations.forEach(function(donation) {
    var tr = $('<tr>')
    tr.append('<td>' + donation.to + '</td>')
    tr.append('<td>' + donation.amount + '</td>')
    tr.append('<td>' + donation.when + '</td>')
    tr.append('<td>' + donation.details + '</td>')
    table_donations.append(tr)
  })
</script>


{% endblock %}
